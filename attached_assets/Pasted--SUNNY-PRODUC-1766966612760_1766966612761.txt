/**

- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
- SUNNY PRODUCTION TEST SUITE - REALISTIC MULTI-USER CONVERSATIONS
- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
- 
- This simulates REAL parents having REAL conversations with Sunny.
- Tests natural conversation, shopping, nights in, attractions, and affiliates.
- 
- RUN: node sunny-production-test.js
- 
- OR with custom URL:
- BASE_URL=https://your-replit-url.dev node sunny-production-test.js
- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  */

const BASE_URL = process.env.BASE_URL || â€˜http://localhost:3000â€™;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SIMULATED USERS - Real parents with real needs
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const SIMULATED_USERS = [
{
name: â€œSarah (Tired Mum, Birmingham)â€,
scenario: â€œRainy weekend, needs to entertain kidsâ€,
conversation: [
â€œHi!â€,
â€œItâ€™s raining and the kids are driving me mad. Any ideas?â€,
â€œWhat about soft play places near Birmingham?â€,
â€œActually we might just stay in. Whatâ€™s good on Netflix for a 5 year old?â€,
â€œPerfect! Can you recommend something to keep them busy while I order pizza?â€
],
expectations: {
shouldMention: [â€˜Kids Passâ€™, â€˜soft playâ€™, â€˜Netflixâ€™],
shouldHaveAffiliates: true,
shouldNotHallucinate: true
}
},
{
name: â€œDave (Weekend Dad, London)â€,
scenario: â€œHas the kids this weekend, wants a special day outâ€,
conversation: [
â€œHey Sunnyâ€,
â€œIâ€™ve got my two kids this weekend, 7 and 9 years old. Want to do something special.â€,
â€œWhat theme parks are near London?â€,
â€œAre there any deals on?â€,
â€œWhat about somewhere with animals instead?â€
],
expectations: {
shouldMention: [â€˜Kids Passâ€™, â€˜theme parkâ€™, â€˜zooâ€™, â€˜saveâ€™],
shouldHaveAffiliates: true,
shouldNotHallucinate: true
}
},
{
name: â€œEmma (Birthday Party Mum, Manchester)â€,
scenario: â€œPlanning daughterâ€™s 6th birthdayâ€,
conversation: [
â€œHi, I need help planning my daughterâ€™s birthday partyâ€,
â€œSheâ€™s turning 6 and loves dinosaursâ€,
â€œCan you find party venues near Manchester?â€,
â€œWhat about dinosaur party supplies I could buy?â€,
â€œAnd maybe a dinosaur themed cake?â€
],
expectations: {
shouldMention: [â€˜partyâ€™, â€˜dinosaurâ€™],
shouldHaveAffiliates: true,
shouldNotHallucinate: true
}
},
{
name: â€œTom (Movie Night Dad, Bristol)â€,
scenario: â€œPlanning a cosy family movie nightâ€,
conversation: [
â€œWeâ€™re having a movie night tonightâ€,
â€œWhatâ€™s a good family film on Disney Plus?â€,
â€œThe kids are 4 and 8 so needs to suit bothâ€,
â€œWhat snacks should we get?â€,
â€œCan we get pizza delivered with any deals?â€
],
expectations: {
shouldMention: [â€˜Disneyâ€™, â€˜movieâ€™, â€˜filmâ€™],
shouldNotMention: [â€˜cinemaâ€™, â€˜Kids Pass cinemaâ€™], // Home movie, not cinema!
shouldHaveAffiliates: true,
shouldHaveFoodDeals: true
}
},
{
name: â€œLisa (Budget Mum, Leeds)â€,
scenario: â€œLooking for cheap days outâ€,
conversation: [
â€œHiyaâ€,
â€œNeed some cheap days out ideas for the summer holidaysâ€,
â€œGot 3 kids, ages 3, 6 and 10â€,
â€œWhatâ€™s the best value with Kids Pass?â€,
â€œAny free activities we could do at home on rainy days?â€
],
expectations: {
shouldMention: [â€˜Kids Passâ€™, â€˜saveâ€™, â€˜freeâ€™],
shouldHaveAffiliates: true,
shouldNotHallucinate: true
}
},
{
name: â€œJames (New Dad, Edinburgh)â€,
scenario: â€œFirst time looking for toddler activitiesâ€,
conversation: [
â€œHello!â€,
â€œJust found out about Kids Pass. What can I use it for?â€,
â€œIâ€™ve got an 18 month old - whatâ€™s suitable for toddlers?â€,
â€œSoft play near Edinburgh?â€,
â€œWhat toys would you recommend for that age?â€
],
expectations: {
shouldMention: [â€˜Kids Passâ€™, â€˜toddlerâ€™, â€˜soft playâ€™],
shouldHaveAffiliates: true,
shouldNotHallucinate: true
}
},
{
name: â€œRachel (Safari Fan, Midlands)â€,
scenario: â€œSpecifically wants safari parksâ€,
conversation: [
â€œSafari parks!â€,
â€œWhat safari parks are near the Midlands?â€,
â€œDo you have discount codes for any of them?â€,
â€œWhat should we take for a day at the safari?â€,
â€œBinoculars for the kids maybe?â€
],
expectations: {
shouldMention: [â€˜Kids Passâ€™, â€˜safariâ€™],
shouldNotMention: [â€˜Longleatâ€™], // Unless itâ€™s actually in the API!
shouldHaveAffiliates: true,
shouldNotHallucinate: true
}
},
{
name: â€œChris (Cinema Dad, Newcastle)â€,
scenario: â€œWants to take kids to the cinemaâ€,
conversation: [
â€œWhatâ€™s on at the cinema this weekend?â€,
â€œAnything good for a 7 year old?â€,
â€œHow much can I save with Kids Pass?â€,
â€œIs Odeon or Vue better value?â€
],
expectations: {
shouldMention: [â€˜Kids Passâ€™, â€˜cinemaâ€™, â€˜saveâ€™],
shouldHaveAffiliates: false, // Cinema doesnâ€™t need product affiliates
shouldNotHallucinate: true
}
}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TEST RUNNER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const COLORS = {
reset: â€˜\x1b[0mâ€™,
bright: â€˜\x1b[1mâ€™,
red: â€˜\x1b[31mâ€™,
green: â€˜\x1b[32mâ€™,
yellow: â€˜\x1b[33mâ€™,
blue: â€˜\x1b[34mâ€™,
magenta: â€˜\x1b[35mâ€™,
cyan: â€˜\x1b[36mâ€™,
white: â€˜\x1b[37mâ€™,
gray: â€˜\x1b[90mâ€™
};

function log(color, â€¦args) {
console.log(color, â€¦args, COLORS.reset);
}

async function chat(message) {
try {
const response = await fetch(`${BASE_URL}/sunny/chat`, {
method: â€˜POSTâ€™,
headers: { â€˜Content-Typeâ€™: â€˜application/jsonâ€™ },
body: JSON.stringify({ message })
});
return await response.json();
} catch (error) {
return { error: error.message, success: false };
}
}

async function checkHealth() {
try {
const response = await fetch(`${BASE_URL}/sunny/health`);
const data = await response.json();
return data;
} catch (error) {
return { error: error.message };
}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ANALYSIS FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function analyzeResponse(response, expectations, apiResults) {
const issues = [];
const passes = [];
const responseText = response.toLowerCase();

// Check for expected mentions
if (expectations.shouldMention) {
for (const term of expectations.shouldMention) {
if (responseText.includes(term.toLowerCase())) {
passes.push(`âœ“ Mentioned "${term}"`);
} else {
issues.push(`âœ— Should mention "${term}" but didn't`);
}
}
}

// Check for things that should NOT be mentioned
if (expectations.shouldNotMention) {
for (const term of expectations.shouldNotMention) {
if (responseText.includes(term.toLowerCase())) {
issues.push(`âœ— Should NOT mention "${term}" but did`);
} else {
passes.push(`âœ“ Correctly avoided "${term}"`);
}
}
}

// Check for hallucinations
if (expectations.shouldNotHallucinate && apiResults) {
const apiNames = [];
if (apiResults.apiResults) {
apiResults.apiResults.forEach(r => {
if (r.names) apiNames.push(â€¦r.names.map(n => n.toLowerCase()));
});
}

```
// Common attractions that get hallucinated
const commonHallucinations = [
  'longleat', 'alton towers', 'thorpe park', 'chessington', 
  'legoland', 'drayton manor', 'blackpool pleasure beach'
];

for (const name of commonHallucinations) {
  if (responseText.includes(name) && apiNames.length > 0) {
    const isInApi = apiNames.some(api => api.includes(name));
    if (!isInApi) {
      issues.push(`âœ— HALLUCINATION: Mentioned "${name}" but not in API results`);
    }
  }
}

if (issues.filter(i => i.includes('HALLUCINATION')).length === 0) {
  passes.push(`âœ“ No hallucinations detected`);
}
```

}

// Check for affiliate links
if (expectations.shouldHaveAffiliates) {
if (responseText.includes(â€˜amazonâ€™) || responseText.includes(â€˜awinâ€™) ||
responseText.includes(â€˜httpâ€™) || responseText.includes(â€˜shopâ€™)) {
passes.push(`âœ“ Contains shopping/affiliate references`);
}
}

// Check for food deals (for movie night scenarios)
if (expectations.shouldHaveFoodDeals) {
if (responseText.includes(â€˜uberâ€™) || responseText.includes(â€˜deliverooâ€™) ||
responseText.includes(â€˜pizzaâ€™) || responseText.includes(â€˜orderâ€™)) {
passes.push(`âœ“ Contains food delivery mention`);
} else {
issues.push(`âœ— Should mention food delivery for movie night`);
}
}

// Check conversational quality
if (response.length < 50) {
issues.push(`âœ— Response too short (${response.length} chars) - not conversational`);
} else if (response.length > 100) {
passes.push(`âœ“ Good response length (${response.length} chars)`);
}

// Check for questions (engagement)
if (response.includes(â€™?â€™)) {
passes.push(`âœ“ Asks follow-up question (engaging)`);
}

return { issues, passes };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN TEST RUNNER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

async function runFullTest() {
console.log(` ${COLORS.cyan}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘                                                                              â•‘ â•‘   ${COLORS.bright}SUNNY PRODUCTION TEST SUITE${COLORS.cyan}                                            â•‘ â•‘   ${COLORS.white}Realistic Multi-User Conversation Testing${COLORS.cyan}                             â•‘ â•‘                                                                              â•‘ â•‘   Testing: ${COLORS.yellow}${BASE_URL}${COLORS.cyan}                      â•‘                                                                              â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ${COLORS.reset}`);

// Health check first
log(COLORS.yellow, â€˜\nğŸ¥ Checking Sunny healthâ€¦â€™);
const health = await checkHealth();
if (health.error) {
log(COLORS.red, `\nâŒ FAILED: Cannot connect to Sunny at ${BASE_URL}`);
log(COLORS.red, `   Error: ${health.error}`);
log(COLORS.yellow, â€˜\n   Make sure your server is running!â€™);
process.exit(1);
}
log(COLORS.green, `âœ“ Sunny is online: ${health.status || health.version || 'OK'}`);

// Results tracking
const results = {
totalConversations: 0,
totalMessages: 0,
totalPasses: 0,
totalIssues: 0,
hallucinations: 0,
users: []
};

// Run each userâ€™s conversation
for (const user of SIMULATED_USERS) {
console.log(`${COLORS.magenta}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ${COLORS.bright}ğŸ‘¤ ${user.name}${COLORS.reset} ${COLORS.gray}ğŸ“ Scenario: ${user.scenario} ${COLORS.magenta}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${COLORS.reset}`);

```
const userResult = {
  name: user.name,
  messages: [],
  passes: 0,
  issues: 0
};

for (let i = 0; i < user.conversation.length; i++) {
  const message = user.conversation[i];
  
  log(COLORS.blue, `\nğŸ’¬ User: "${message}"`);
  
  const startTime = Date.now();
  const response = await chat(message);
  const elapsed = Date.now() - startTime;
  
  if (response.error || !response.success) {
    log(COLORS.red, `\nâŒ ERROR: ${response.error || 'Request failed'}`);
    userResult.issues++;
    continue;
  }

  const sunnyResponse = response.response || '';
  log(COLORS.green, `\nğŸŒ Sunny (${elapsed}ms):`);
  
  // Print response nicely formatted
  const lines = sunnyResponse.split('\n');
  for (const line of lines) {
    log(COLORS.white, `   ${line}`);
  }

  // Show debug info
  if (response.debug) {
    log(COLORS.gray, `\n   [Debug] Intents: ${response.debug.intents?.map(i => i.type).join(', ') || 'N/A'}`);
    if (response.debug.apiResults) {
      for (const r of response.debug.apiResults) {
        if (r.names && r.names.length > 0) {
          log(COLORS.gray, `   [Debug] ${r.type} API returned: ${r.names.slice(0, 3).join(', ')}${r.names.length > 3 ? '...' : ''}`);
        }
      }
    }
    if (response.debug.kidsPassPromo) {
      log(COLORS.gray, `   [Debug] Kids Pass promo: ${response.debug.kidsPassPromo}`);
    }
  }

  // Analyze the final response in each conversation
  if (i === user.conversation.length - 1) {
    const analysis = analyzeResponse(sunnyResponse, user.expectations, response.debug);
    
    if (analysis.passes.length > 0) {
      log(COLORS.green, `\n   Analysis:`);
      for (const pass of analysis.passes) {
        log(COLORS.green, `   ${pass}`);
        userResult.passes++;
      }
    }
    
    if (analysis.issues.length > 0) {
      log(COLORS.red, `\n   Issues:`);
      for (const issue of analysis.issues) {
        log(COLORS.red, `   ${issue}`);
        userResult.issues++;
        if (issue.includes('HALLUCINATION')) {
          results.hallucinations++;
        }
      }
    }
  }

  userResult.messages.push({
    user: message,
    sunny: sunnyResponse,
    elapsed
  });
  
  results.totalMessages++;
  
  // Small delay between messages to simulate real typing
  await new Promise(r => setTimeout(r, 500));
}

results.users.push(userResult);
results.totalConversations++;
results.totalPasses += userResult.passes;
results.totalIssues += userResult.issues;
```

}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FINAL REPORT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

console.log(` ${COLORS.cyan}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘                                                                              â•‘ â•‘   ${COLORS.bright}ğŸ“Š FINAL TEST REPORT${COLORS.cyan}                                                    â•‘ â•‘                                                                              â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ${COLORS.reset}`);

console.log(` ${COLORS.white}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ SUMMARY                                                                     â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Total Conversations:  ${String(results.totalConversations).padEnd(54)}â”‚ â”‚ Total Messages:       ${String(results.totalMessages).padEnd(54)}â”‚ â”‚ ${COLORS.green}Passes:               ${String(results.totalPasses).padEnd(54)}${COLORS.white}â”‚ â”‚ ${COLORS.red}Issues:               ${String(results.totalIssues).padEnd(54)}${COLORS.white}â”‚ â”‚ ${results.hallucinations > 0 ? COLORS.red : COLORS.green}Hallucinations:       ${String(results.hallucinations).padEnd(54)}${COLORS.white}â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ${COLORS.reset}`);

// Per-user breakdown
console.log(`${COLORS.white} â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ PER-USER RESULTS                                                            â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤`);

for (const user of results.users) {
const status = user.issues === 0 ? `${COLORS.green}âœ“ PASS` : `${COLORS.red}âœ— FAIL`;
console.log(`â”‚ ${status}${COLORS.white} ${user.name.substring(0, 40).padEnd(40)} (${user.passes} pass, ${user.issues} issues) â”‚`);
}

console.log(`â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${COLORS.reset}`);

// Final verdict
if (results.totalIssues === 0 && results.hallucinations === 0) {
console.log(` ${COLORS.green}${COLORS.bright} â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘                                                                              â•‘ â•‘   âœ… ALL TESTS PASSED - SUNNY IS PRODUCTION READY!                          â•‘ â•‘                                                                              â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ${COLORS.reset}`);
} else if (results.hallucinations > 0) {
console.log(` ${COLORS.red}${COLORS.bright} â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘                                                                              â•‘ â•‘   âš ï¸  HALLUCINATIONS DETECTED - DO NOT DEPLOY                                â•‘ â•‘                                                                              â•‘ â•‘   Sunny mentioned attractions not in the API. This needs fixing.            â•‘ â•‘                                                                              â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ${COLORS.reset}`);
} else {
console.log(` ${COLORS.yellow}${COLORS.bright} â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘                                                                              â•‘ â•‘   âš ï¸  SOME ISSUES FOUND - REVIEW BEFORE DEPLOYING                            â•‘ â•‘                                                                              â•‘ â•‘   ${results.totalIssues} issue(s) found. Check the output above for details.              â•‘ â•‘                                                                              â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ${COLORS.reset}`);
}

// Affiliate summary
console.log(`
${COLORS.cyan}â”€â”€ MONETIZATION CHECK â”€â”€${COLORS.reset}

To verify affiliate links are working:

1. Look for Amazon/shopping links in responses above
1. Check Uber Eats mentions in movie night scenarios
1. Verify Kids Pass links point to correct categories

${COLORS.gray}Tip: Run with DEBUG=true for full API response logging${COLORS.reset}
`);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RUN IT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

runFullTest().catch(err => {
console.error(â€˜Test suite crashed:â€™, err);
process.exit(1);
});